{{extend 'layout.html'}}

{{block head}}
<!-- Anything in this block will be added
     to the html head section of the page. -->
{{end}}

<!-- 
     # In the view
     #
     # Row headers: student names
     # Column headers: date (vertical format)
     #                 weekday abbreviation
     #
     # for each student
     #   for each weekday
     #     if it is a non-attendance day:
     #       display as "greyed out", no checkbox
     #     else:
     #       display checkbox
     #       if present:
     #         checkbox=checked
     #       else:
     #         checkbox=unchecked

     Is it possible to have a table header that stays fixed while things scroll under it.
     Like frozen rows in Excel.

     It would be nice to have the row and columm highlight under the cursor.
   -->

<h1>{{=date_header}} Attendance</h1>

<div class="row">
    <div class="col-sm-12">
        <select id="attendance_month">
            {{for month in menu_months:}}
            <option value="{{=month}}"
                    {{if month == date_header:}}selected{{pass}}>{{=month}}</option>
            {{pass}}
        </select>
    </div>
</div>

<div class="row">
    <div class="col-sm-12">

        <table class="table table-striped">

            <!--
                 I can probably add column highlighting with a
                 colgroup and a class, and maybe some javascript.

                 Don't need row highlighting, as we've go the stripes.
            -->

            <thead>
                <tr>
                    <th>Student</th>
                    {{for date in sorted(class_days.keys()):}}
                    <th>{{=date.day}}<br>{{=class_days[date][0]}}</th>
                    {{pass}}
                </tr>
            </thead>

            <tbody>
                {{ordered_class_day_list = sorted(class_days.keys())}}

                {{for student in sorted(class_list.keys()):}}
                {{student_id = class_list[student]}}
                <tr>

                    <td>
                        {{=student}}
                    </td>

                    {{for class_day in ordered_class_day_list:}}
                    {{attendance_record_id, student_present = attendance[student_id][class_day]}}
                    <td>
                        <input type="checkbox"
                               id="{{=attendance_record_id}},{{=class_day}},{{=student_id}},{{=class_id}}"
                               {{ if student_present:}}
                               checked="checked"
                               {{pass}}
                        />
                    </td>
                    {{pass}}

                </tr>
                {{pass}}
            </tbody>

        </table>
    </div>
</div>
