{{extend 'layout.html'}}

<div class="container">
    <div class="row">
        <div class="col-sm-12">
            <h1>{{=auth.user.first_name}} {{=auth.user.last_name}}'s Gradebook</h1>
            <table class="table">
                {{for row in class_data:}}
                  <tr class="{{=get_contextual_classes(float(row[3]))}}">
                    <td><h3>{{=A(row[0], _href=URL('classes', 'overview', args=[row[1]]))}}</h3></td>
                    <td><h3>{{=row[2]}}</h3></td>
                    <td><h3>{{=row[3]}} %</h3></td>
                  </tr>
                {{pass}}
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h1>Bar Chart</h1>
            <canvas id="barChart" width="900" height="400"></canvas>
        </div>
    </div>
</div>

<script src="{{=URL('static', 'js/Chart.js')}}"></script>
<script>
 
 var barChartData  = {
     labels: ["{{=class_data[0][2]}}"],
     datasets: [
         {
             label: "My First dataset",
             fillColor: "rgba(220,220,220,0.5)",
             strokeColor: "rgba(220,220,220,0.8)",
             highlightFill: "rgba(220,220,220,0.75)",
             highlightStroke: "rgba(220,220,220,1)",
             data: [{{=class_data[0][3]}}]
         },
         {
             label: "My Second dataset",
             fillColor: "rgba(151,187,205,0.5)",
             strokeColor: "rgba(151,187,205,0.8)",
             highlightFill: "rgba(151,187,205,0.75)",
             highlightStroke: "rgba(151,187,205,1)",
             data: [{{=class_data[1][3]}}]
         }
     ]
 };

 var barChartOptions = {};
 var barChartContext = $("#barChart").get(0).getContext("2d");
 var myBarChart = new Chart(barChartContext).Bar(barChartData, barChartOptions);

</script>
